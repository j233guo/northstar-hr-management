<!DOCTYPE html>
<html>
    <head>
        <title>Employee</title>
        <link rel="stylesheet" href="css/theme.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    </head>
    <body>
        {{> header user}}
        <div class="container">
            <br/>
            <h1>Update Employee Information</h1>
            <br/>
            {{#if user}}
                <div class="row">
                    <div class="col-md-12">
                        <br>
                        <h2>{{viewData.employee.firstName}} {{viewData.employee.lastName}} - Employee: {{viewData.employee.employeeNum}}</h2>
                        <hr />
                        <form method="post" action="/employee/update">
                            <fieldset>
                                <legend>Personal Information</legend>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label for="firstName">First Name:</label>
                                            <input class="form-control" id="firstName" name="firstName" type="text" value="{{viewData.employee.firstName}}" />
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                        <label for="lastName">Last Name:</label>
                                        <input class="form-control" id="lastName" name="lastName" type="text" value="{{viewData.employee.lastName}}" />
                                        </div>
                                    </div>
                                    <input name = "employeeNum" type = "hidden" value = "{{viewData.employee.employeeNum}}">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                        <label for="email">Email:</label>
                                        <input class="form-control" id="email" name="email" type="email" value="{{viewData.employee.email}}" />
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                        <label for="SSN">Social Insurance Number:</label>
                                        <input class="form-control" id="SSN" name="SSN" type="text" value="{{viewData.employee.SSN}}" readonly/>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                        <label for="addressStreet">Address (Street):</label>
                                        <input class="form-control" id="addressStreet" name="addressStreet" type="text" value="{{viewData.employee.addressStreet}}" />
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                        <label for="addressCity">Address (City/Town):</label>
                                        <input class="form-control" id="addressCity" name="addressCity" type="text" value="{{viewData.employee.addressCity}}" />
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                        <label for="addressState">Address (Province/State):</label>
                                        <input class="form-control" id="addressState" name="addressState" type="text" value="{{viewData.employee.addressState}}" />
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                        <label for="addressPostal">Address (Postal Code):</label>
                                        <input class="form-control" id="addressPostal" name="addressPostal" type="text" value="{{viewData.employee.addressPostal}}" />
                                        </div>
                                    </div>
                                </div>
                                <legend>Company Information</legend>
                                <div class = "row">
                                    <div class="col-md-3">
                                        <div class="form-group">
                                        <label for="isManager">Is Manager:</label>
                                        <br/>
                                        <input class="form-check-input" id="isManager" name="isManager" type="checkbox" 
                                            {{#if viewData.employee.isManager}}
                                                checked
                                            {{/if}}
                                            {{#unless user.isManager}}disabled{{/unless}}/>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                        <label for="employeeManagerNum">Employee's Manager Number:</label>
                                        <input class="form-control" id="employeeManagerNum" name="employeeManagerNum" type="text" value="{{viewData.employee.employeeManagerNum}}" {{#unless user.isManager}}readonly{{/unless}}/>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                        <label for="status">Status: </label><br>
                                            <label class="checkbox-inline">
                                                <input type="radio" name = "status" value="Full Time" 
                                                {{#equal viewData.employee.status "Full Time"}} checked {{/equal}} {{#unless user.isManager}}disabled{{/unless}}/> Full Time 
                                            </label>
                                            <label class="checkbox-inline">
                                                <input type="radio" name = "status" value="Part Time"
                                                {{#equal viewData.employee.status "Part Time"}}checked{{/equal}} {{#unless user.isManager}}disabled{{/unless}}/> Part Time 
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="form-group">
                                            <label>Department</label>
                                            {{#if viewData.departments}}
                                            <select class="form-control" name="department" id="department" {{#unless user.isManager}}disabled{{/unless}}>
                                                <option value="">Select Department</option>
                                                {{#each viewData.departments}}
                                                <option value="{{departmentId}}" {{#if selected}} selected {{/if}} >{{departmentName}} </option>
                                                {{/each}}                                                
                                            </select>
                                            {{else}}
                                                <div>No Departments</div>
                                            {{/if}}
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="form-group">
                                        <label for="hireDate">Hire Date</label>
                                        <input class="form-control" id="hireDate" name="hireDate" type="text" value="{{viewData.employee.hireDate}}" readonly/>
                                        </div>
                                    </div>
                                </div>
                            </fieldset>
                            <hr />
                            <input type="submit" class="btn btn-primary float-right" value="Update Employee" /><br /><br /><br />
                        </form>
                    </div>
                </div>

            {{else}}
                <p class="errorMsg">You are not authorized to see this page.</p>
            {{/if}}
        </div>
        {{> footer}}
    </body>
</html>